"use strict";(self.webpackChunkdominus=self.webpackChunkdominus||[]).push([[299],{9299:(oe,h,c)=>{c.r(h),c.d(h,{AdminProductModule:()=>re});var l=c(177),n=c(9417),m=c(3756),e=c(540),g=c(1626),p=c(7359);let f=(()=>{class i{constructor(t){this.http=t,this.categoryUrl="http://localhost:3000/categories"}getCategories(){return this.http.get(this.categoryUrl)}addCategory(t){return this.http.post(this.categoryUrl,t)}updateCategory(t,o){return this.http.put(`${this.categoryUrl}/${t}`,o)}deleteCategory(t){return this.http.delete(`${this.categoryUrl}/${t}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(g.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function _(i,a){if(1&i&&(e.j41(0,"option",27),e.EFF(1),e.k0s()),2&i){const t=a.$implicit,o=e.XpG(4);let r;e.Y8G("value",t)("selected",t===(null==(r=o.editForm.get("category"))?null:r.value)),e.R7$(1),e.JRh(t)}}function F(i,a){if(1&i&&(e.j41(0,"div")(1,"div")(2,"label",11),e.EFF(3,"Price"),e.k0s(),e.nrm(4,"input",16),e.k0s(),e.j41(5,"div")(6,"label",11),e.EFF(7,"Stock"),e.k0s(),e.nrm(8,"input",17),e.k0s(),e.j41(9,"div")(10,"label",11),e.EFF(11,"Category"),e.k0s(),e.j41(12,"select",18)(13,"option",19),e.EFF(14,"Select a category"),e.k0s(),e.DNE(15,_,2,3,"option",20),e.k0s()(),e.j41(16,"div")(17,"label",11),e.EFF(18,"Colors (comma-separated)"),e.k0s(),e.nrm(19,"input",21),e.k0s(),e.j41(20,"div")(21,"label",11),e.EFF(22,"Warranty"),e.k0s(),e.nrm(23,"input",22),e.k0s(),e.j41(24,"div")(25,"label",11),e.EFF(26,"Description"),e.k0s(),e.nrm(27,"textarea",23),e.k0s(),e.j41(28,"div",24),e.nrm(29,"input",25),e.j41(30,"label",26),e.EFF(31,"Top Selling"),e.k0s()()()),2&i){const t=e.XpG(3);e.R7$(15),e.Y8G("ngForOf",t.categories)}}function k(i,a){if(1&i&&(e.j41(0,"div",36),e.nrm(1,"img",37),e.k0s()),2&i){const t=e.XpG(4);e.R7$(1),e.Y8G("src",t.imagePreview,e.B4B)}}function x(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"div")(2,"label",28),e.EFF(3,"Category Image"),e.k0s(),e.j41(4,"div",29),e.DNE(5,k,2,1,"div",30),e.j41(6,"input",31),e.bIt("change",function(r){e.eBV(t);const s=e.XpG(3);return e.Njj(s.onImageSelected(r))}),e.k0s()()(),e.j41(7,"div",32)(8,"div")(9,"label",28),e.EFF(10,"Color"),e.k0s(),e.nrm(11,"input",33),e.k0s(),e.j41(12,"div")(13,"label",28),e.EFF(14,"Status"),e.k0s(),e.j41(15,"select",34)(16,"option",35),e.EFF(17,"Active"),e.k0s(),e.j41(18,"option",35),e.EFF(19,"Inactive"),e.k0s()()()()()}if(2&i){const t=e.XpG(3);e.R7$(5),e.Y8G("ngIf",t.imagePreview),e.R7$(11),e.Y8G("value",!0),e.R7$(2),e.Y8G("value",!1)}}function C(i,a){if(1&i){const t=e.RV6();e.j41(0,"form",9),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onSave())}),e.j41(1,"div",10)(2,"div")(3,"label",11),e.EFF(4,"Name *"),e.k0s(),e.nrm(5,"input",12),e.k0s(),e.DNE(6,F,32,1,"div",8),e.DNE(7,x,20,3,"div",8),e.k0s(),e.j41(8,"div",13)(9,"button",14),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onClose())}),e.EFF(10,"Cancel"),e.k0s(),e.j41(11,"button",15),e.EFF(12),e.k0s()()()}if(2&i){const t=e.XpG(2);e.Y8G("formGroup",t.editForm),e.R7$(6),e.Y8G("ngIf","product"===t.entityType),e.R7$(1),e.Y8G("ngIf","category"===t.entityType),e.R7$(4),e.Y8G("disabled",!t.editForm.valid),e.R7$(1),e.SpI(" ","add"===t.mode?"Create":"Save"," ")}}function j(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"p",38),e.EFF(2),e.k0s(),e.j41(3,"div",39)(4,"button",40),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onClose())}),e.EFF(5,"Cancel"),e.k0s(),e.j41(6,"button",41),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onDelete())}),e.EFF(7,"Delete"),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.SpI(' Are you sure you want to delete "',"product"===t.entityType?null==t.product?null:t.product.name:null==t.category?null:t.category.name,'"? This action cannot be undone. ')}}function E(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e.EFF(4),e.k0s(),e.j41(5,"button",5),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onClose())}),e.nrm(6,"i",6),e.k0s()(),e.DNE(7,C,13,5,"form",7),e.DNE(8,j,8,1,"div",8),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(4),e.SpI(" ",t.getModalTitle()," "),e.R7$(3),e.Y8G("ngIf","delete"!==t.mode),e.R7$(1),e.Y8G("ngIf","delete"===t.mode)}}let b=(()=>{class i{constructor(t,o,r){this.fb=t,this.productService=o,this.categoriesService=r,this.isOpen=!1,this.mode="edit",this.entityType="product",this.product=null,this.category=null,this.close=new e.bkB,this.save=new e.bkB,this.confirmDelete=new e.bkB,this.categories=[],this.selectedImageFile=null,this.imagePreview=null,this.editForm=this.fb.group({name:["",n.k0.required],price:[0],stock:[0],category:[""],colors:[[]],warranty:[""],description:[""],topSelling:[!1],color:["#000000"],status:[!0]}),this.loadCategories()}ngOnChanges(){this.isOpen&&(this.editForm.get("name")?.setValidators([n.k0.required]),this.editForm.get("price")?.clearValidators(),this.editForm.get("stock")?.clearValidators(),this.editForm.get("category")?.clearValidators(),this.editForm.get("colors")?.clearValidators(),this.editForm.get("warranty")?.clearValidators(),this.editForm.get("description")?.clearValidators(),this.editForm.get("topSelling")?.clearValidators(),this.editForm.get("color")?.clearValidators(),this.editForm.get("status")?.clearValidators(),"product"===this.entityType?(this.editForm.get("price")?.setValidators([n.k0.required,n.k0.min(0)]),this.editForm.get("stock")?.setValidators([n.k0.required,n.k0.min(0)]),this.editForm.get("category")?.setValidators([n.k0.required])):"category"===this.entityType&&(this.editForm.get("color")?.setValidators([n.k0.required]),this.editForm.get("status")?.setValidators([n.k0.required])),this.editForm.get("name")?.updateValueAndValidity(),this.editForm.get("price")?.updateValueAndValidity(),this.editForm.get("stock")?.updateValueAndValidity(),this.editForm.get("category")?.updateValueAndValidity(),this.editForm.get("colors")?.updateValueAndValidity(),this.editForm.get("warranty")?.updateValueAndValidity(),this.editForm.get("description")?.updateValueAndValidity(),this.editForm.get("topSelling")?.updateValueAndValidity(),this.editForm.get("color")?.updateValueAndValidity(),this.editForm.get("status")?.updateValueAndValidity(),("edit"===this.mode||"add"===this.mode)&&("product"===this.entityType&&this.product?(this.editForm.patchValue({name:this.product.name,price:this.product.price,stock:this.product.stock,category:this.product.category,colors:Array.isArray(this.product.colors)?this.product.colors.join(", "):this.product.colors,warranty:this.product.warranty,description:this.product.description,topSelling:this.product.topSelling}),this.imagePreview=null):"category"===this.entityType&&this.category?(this.editForm.patchValue({name:this.category.name,color:this.category.color,status:this.category.status}),this.imagePreview=this.category.icon?this.category.icon:null):"add"===this.mode&&this.resetForm()))}onImageSelected(t){const o=t.target.files[0];if(o){this.selectedImageFile=o;const r=new FileReader;r.onload=()=>{this.imagePreview=r.result},r.readAsDataURL(o)}}onClose(){this.close.emit(),this.resetForm()}onSave(){if("edit"!==this.mode&&"add"!==this.mode||!this.editForm.valid)console.log("Form is invalid:",this.editForm.errors),this.markFormGroupTouched();else{const t=this.editForm.value;if("product"===this.entityType){const o={...t,colors:"string"==typeof t.colors?t.colors.split(",").map(r=>r.trim()).filter(r=>""!==r):t.colors};this.save.emit(o)}else this.save.emit({name:t.name,color:t.color,icon:this.imagePreview||this.category?.icon||"",status:t.status});this.onClose()}}onDelete(){if("delete"===this.mode){const t="product"===this.entityType?this.product?.id:this.category?.id;t&&(this.confirmDelete.emit(t),this.onClose())}}getModalTitle(){return"delete"===this.mode?`Delete ${this.entityType}`:"add"===this.mode?`Add New ${this.entityType.charAt(0).toUpperCase()+this.entityType.slice(1)}`:`Edit ${this.entityType}`}resetForm(){this.editForm.reset({name:"",price:0,stock:0,category:"",colors:[],warranty:"",description:"",topSelling:!1,color:"#000000",status:!0}),this.editForm.get("name")?.setValidators([n.k0.required]),this.editForm.get("price")?.clearValidators(),this.editForm.get("stock")?.clearValidators(),this.editForm.get("category")?.clearValidators(),this.editForm.get("colors")?.clearValidators(),this.editForm.get("warranty")?.clearValidators(),this.editForm.get("description")?.clearValidators(),this.editForm.get("topSelling")?.clearValidators(),this.editForm.get("color")?.clearValidators(),this.editForm.get("status")?.clearValidators(),"product"===this.entityType?(this.editForm.get("price")?.setValidators([n.k0.required,n.k0.min(0)]),this.editForm.get("stock")?.setValidators([n.k0.required,n.k0.min(0)]),this.editForm.get("category")?.setValidators([n.k0.required])):"category"===this.entityType&&(this.editForm.get("color")?.setValidators([n.k0.required]),this.editForm.get("status")?.setValidators([n.k0.required])),this.editForm.get("name")?.updateValueAndValidity(),this.editForm.get("price")?.updateValueAndValidity(),this.editForm.get("stock")?.updateValueAndValidity(),this.editForm.get("category")?.updateValueAndValidity(),this.editForm.get("colors")?.updateValueAndValidity(),this.editForm.get("warranty")?.updateValueAndValidity(),this.editForm.get("description")?.updateValueAndValidity(),this.editForm.get("topSelling")?.updateValueAndValidity(),this.editForm.get("color")?.updateValueAndValidity(),this.editForm.get("status")?.updateValueAndValidity(),"product"===this.entityType&&this.categories.length>0&&!this.editForm.get("category")?.value&&this.editForm.patchValue({category:this.categories[0]}),this.imagePreview=null,this.selectedImageFile=null}markFormGroupTouched(){Object.keys(this.editForm.controls).forEach(t=>{this.editForm.get(t)?.markAsTouched()})}loadCategories(){this.productService.getCategories().subscribe({next:t=>{this.categories=t.map(o=>o.name),this.isOpen&&"product"===this.entityType&&!this.editForm.get("category")?.value&&this.editForm.patchValue({category:this.categories[0]})},error:t=>console.error("Error loading categories:",t)})}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(n.ok),e.rXU(p.b),e.rXU(f))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-admin-modal"]],inputs:{isOpen:"isOpen",mode:"mode",entityType:"entityType",product:"product",category:"category"},outputs:{close:"close",save:"save",confirmDelete:"confirmDelete"},features:[e.OA$],decls:1,vars:1,consts:[["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","shadow-lg","p-6","w-full","max-w-md","mx-4","max-h-[90vh]","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-gray-800"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"fa-solid","fa-times","fa-xl","fa",2,"color","#6e6e6e"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700"],["formControlName","name","type","text",1,"text-black","mt-1","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],[1,"mt-6","flex","justify-end","space-x-3"],["type","button",1,"bg-gray-300","hover:bg-gray-400","text-gray-800","px-4","py-2","rounded-md",3,"click"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-md","disabled:bg-blue-300",3,"disabled"],["formControlName","price","type","number",1,"text-black","mt-1","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","stock","type","number",1,"text-black","mt-1","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","category",1,"mt-1","text-black","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],["value",""],["class","text-black",3,"value","selected",4,"ngFor","ngForOf"],["formControlName","colors","type","text","placeholder","e.g., Red, Blue, White",1,"mt-1","text-black","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","warranty","type","text",1,"text-black","mt-1","block","w-full","border","border-gray-300","rounded-md","p-2","focus:ring-blue-500","focus:border-blue-500"],["formControlName","description","rows","3","placeholder","Enter product description",1,"text-black","w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"flex","items-center"],["formControlName","topSelling","type","checkbox",1,"text-black","h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"ml-2","block","text-sm","text-gray-700"],[1,"text-black",3,"value","selected"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-4"],["class","w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",4,"ngIf"],["type","file","accept","image/*",1,"block","w-full","text-sm","text-gray-500","file:mr-4","file:py-2","file:px-4","file:rounded-full","file:border-0","file:text-sm","file:font-semibold","file:bg-blue-50","file:text-blue-700","hover:file:bg-blue-100",3,"change"],[1,"grid","grid-cols-2","gap-4"],["type","color","formControlName","color",1,"w-full","h-10","border","border-gray-300","rounded-lg"],["formControlName","status",1,"w-full","px-3","py-2","border","text-black","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[3,"value"],[1,"w-16","h-16","bg-gray-200","rounded-lg","flex","items-center","justify-center"],["alt","Preview",1,"w-full","h-full","object-cover","rounded-lg",3,"src"],[1,"text-gray-700","mb-4"],[1,"flex","justify-end","space-x-3"],[1,"bg-gray-300","hover:bg-gray-400","text-gray-800","px-4","py-2","rounded-md",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-md",3,"click"]],template:function(o,r){1&o&&e.DNE(0,E,9,3,"div",0),2&o&&e.Y8G("ngIf",r.isOpen)},dependencies:[l.Sq,l.bT,n.qT,n.xH,n.y7,n.me,n.Q0,n.Zm,n.wz,n.BC,n.cb,n.j4,n.JD]})}}return i})();const P=function(i,a,t){return{"text-green-600":i,"text-orange-600":a,"text-red-600":t}};function w(i,a){if(1&i){const t=e.RV6();e.j41(0,"tr",39)(1,"td",40),e.EFF(2),e.k0s(),e.j41(3,"td",41)(4,"div",42)(5,"div",43),e.nrm(6,"img",44),e.k0s(),e.j41(7,"div")(8,"div",45),e.EFF(9),e.k0s(),e.j41(10,"div",46),e.EFF(11),e.j41(12,"span"),e.EFF(13),e.k0s()()()()(),e.j41(14,"td",47),e.EFF(15),e.k0s(),e.j41(16,"td",40)(17,"span",48),e.EFF(18),e.k0s()(),e.j41(19,"td",40)(20,"span",49),e.EFF(21),e.k0s()(),e.j41(22,"td",40)(23,"span",49),e.EFF(24),e.k0s()(),e.j41(25,"td",40)(26,"span",49),e.EFF(27),e.k0s()(),e.j41(28,"td",40)(29,"span",49),e.EFF(30),e.k0s()(),e.j41(31,"td",50)(32,"div",51)(33,"button",52),e.bIt("click",function(){const s=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.openModal("edit",s))}),e.nrm(34,"i",53),e.k0s(),e.j41(35,"button",54),e.bIt("click",function(){const s=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.openModal("delete",s))}),e.nrm(36,"i",55),e.k0s()()()()}if(2&i){const t=a.$implicit,o=a.index;e.R7$(2),e.JRh(o+1),e.R7$(4),e.Y8G("src",t.images[0],e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI("id: ",t.id," - "),e.R7$(1),e.xc7("color",t.isActive?"green":"red"),e.R7$(1),e.SpI(" ",t.isActive?"Active":"Deactive"," "),e.R7$(2),e.SpI(" $",t.price," "),e.R7$(2),e.Y8G("ngClass",e.sMw(15,P,t.stock>10,t.stock<=10&&t.stock>0,0===t.stock)),e.R7$(1),e.SpI(" ",t.stock," "),e.R7$(3),e.SpI(" ",t.category.toUpperCase()," "),e.R7$(3),e.SpI(" ",t.colors," "),e.R7$(3),e.SpI(" ",t.warranty," "),e.R7$(3),e.SpI(" ",t.topSelling?"Yes":"No"," ")}}function I(i,a){1&i&&(e.j41(0,"div",56),e.nrm(1,"i",57),e.j41(2,"h3",58),e.EFF(3,"No products found"),e.k0s(),e.j41(4,"p",59),e.EFF(5,"Get started by adding your first product."),e.k0s(),e.j41(6,"button",60),e.EFF(7," Add Product "),e.k0s()())}let A=(()=>{class i{constructor(t,o){this.http=t,this.productService=o,this.products=[],this.activeProductsCount=0,this.lowStockCount=0,this.filteredProducts=[],this.searchTerm="",this.outOfStockCount=0,this.isEditModalOpen=!1,this.isDeleteModalOpen=!1,this.selectedProduct=null,this.isModalOpen=!1,this.modalMode="edit"}ngOnInit(){console.log("AdminProductlistComponent initialized"),this.getProducts()}getProducts(){this.productService.getProducts().subscribe({next:t=>{this.products=t,this.filteredProducts=t,console.log(t),this.calculateCounts()},error:t=>{console.error("Error loading products:",t)}})}filterProducts(){if(this.searchTerm.trim()){const t=this.searchTerm.toLowerCase().trim();this.filteredProducts=this.products.filter(o=>o.name.toLowerCase().includes(t)||o.category.toLowerCase().includes(t)||o.id.toLowerCase().includes(t)||o.colors&&o.colors.includes(t))}else this.filteredProducts=this.products}calculateCounts(){this.activeProductsCount=this.products.filter(t=>t.isActive).length,this.lowStockCount=this.products.filter(t=>t.stock>=0&&t.stock<=10).length,this.outOfStockCount=this.products.filter(t=>0===t.stock).length}openModal(t,o){this.selectedProduct=o,this.modalMode=t,this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.selectedProduct=null}handleSave(t){if(this.selectedProduct?.id){const o={...this.selectedProduct,...t};this.productService.updateProduct(this.selectedProduct.id,o).subscribe({next:()=>{this.closeModal(),this.getProducts()},error:r=>console.error("Error updating product:",r)})}}handleDelete(t){this.productService.deleteProduct(t).subscribe({next:()=>{this.closeModal(),this.getProducts()},error:o=>console.error("Error deleting product:",o)})}deleteProduct(){this.selectedProduct&&this.selectedProduct.id&&this.productService.deleteProduct(this.selectedProduct.id).subscribe({next:()=>{this.isDeleteModalOpen=!1,this.getProducts()},error:t=>console.error("Error deleting product:",t)})}updateProduct(t){if(this.selectedProduct&&this.selectedProduct.id){const o={...this.selectedProduct,...t};this.productService.updateProduct(o.id,o).subscribe({next:()=>{this.isEditModalOpen=!1,this.getProducts()},error:r=>console.error("Error updating product:",r)})}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Qq),e.rXU(p.b))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-admin-productlist"]],decls:84,vars:13,consts:[[1,"bg-yellow-100","border-l-4","border-green-500","p-3","mb-2"],[1,"flex"],[1,"flex-shrink-0"],[1,"fa-solid","fa-bug","text-green-500"],[1,"ml-3"],[1,"text-sm","text-yellow-700"],[1,"mx-auto","pt-4"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/products/new",1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","space-x-2","transition-colors"],[1,"fa-solid","fa-plus"],[1,"mt-4","grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-3"],[1,"bg-white","rounded-xl","border","border-green-500","p-3","flex","items-center","space-x-3"],[1,"text-blue-500","text-lg"],[1,"fa-solid","fa-cube"],[1,"text-xs","text-gray-500","font-medium"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-green-500","text-lg"],[1,"fa-solid","fa-check-circle"],[1,"text-orange-500","text-lg"],[1,"fa-solid","fa-exclamation-triangle"],[1,"text-red-500","text-lg"],[1,"fa-solid","fa-times-circle"],[1,"bg-white","rounded-lg","border","border-gray-200","p-4","mb-4"],[1,"flex","flex-col","sm:flex-row","gap-3","items-center","justify-between"],[1,"relative","flex-1","w-full"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fa-solid","fa-search","text-gray-400"],["type","text","placeholder","Search products by name, category, or ID...",1,"pl-10","text-black","pr-4","py-2","w-full","border","border-gray-300","rounded-lg","focus:border-blue-500","transition-colors",3,"ngModel","ngModelChange","input"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"bg-white","rounded-lg","overflow-hidden","pt-4"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-grey"],[1,"bg-gray-50"],[1,"px-2","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],["class","text-center py-12",4,"ngIf"],[3,"isOpen","mode","entityType","product","close","save","confirmDelete"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-2","py-3","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-2","py-3","whitespace-nowrap"],[1,"flex","items-center"],[1,"flex-shrink-0","h-10","w-10","bg-gray-200","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"w-full","h-full","object-cover","group-hover:scale-110","transition-transform","duration-500","rounded-lg",3,"src","alt"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","py-3","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[3,"ngClass"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"px-2","py-3","whitespace-nowrap","text-sm","font-medium"],[1,"flex","space-x-2"],[1,"text-blue-600","hover:text-blue-900","transition-colors","flex","items-center","space-x-1",3,"click"],[1,"fa-solid","fa-edit","w-4"],[1,"text-red-600","hover:text-red-900","transition-colors","flex","items-center","space-x-1",3,"click"],[1,"fa-solid","fa-trash","w-4"],[1,"text-center","py-12"],[1,"fa-solid","fa-box-open","text-4xl","text-gray-300","mb-4"],[1,"text-lg","font-medium","text-gray-700","mb-2"],[1,"text-gray-500","mb-6"],["routerLink","/admin/products/new",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2","rounded-lg","transition-colors"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"i",3),e.k0s(),e.j41(4,"div",4)(5,"p",5),e.EFF(6," Success: Product List Component Loaded Successfully! "),e.k0s()()()(),e.j41(7,"div",6)(8,"div",7)(9,"h1",8),e.EFF(10,"Product List"),e.k0s(),e.j41(11,"button",9),e.nrm(12,"i",10),e.j41(13,"span"),e.EFF(14,"Add Product"),e.k0s()()(),e.j41(15,"div",11)(16,"div",12)(17,"div",13),e.nrm(18,"i",14),e.k0s(),e.j41(19,"div")(20,"p",15),e.EFF(21,"Total Products"),e.k0s(),e.j41(22,"p",16),e.EFF(23),e.k0s()()(),e.j41(24,"div",12)(25,"div",17),e.nrm(26,"i",18),e.k0s(),e.j41(27,"div")(28,"p",15),e.EFF(29,"Active Products"),e.k0s(),e.j41(30,"p",16),e.EFF(31),e.k0s()()(),e.j41(32,"div",12)(33,"div",19),e.nrm(34,"i",20),e.k0s(),e.j41(35,"div")(36,"p",15),e.EFF(37,"Low Stock"),e.k0s(),e.j41(38,"p",16),e.EFF(39),e.k0s()()(),e.j41(40,"div",12)(41,"div",21),e.nrm(42,"i",22),e.k0s(),e.j41(43,"div")(44,"p",15),e.EFF(45,"Out of Stock"),e.k0s(),e.j41(46,"p",16),e.EFF(47),e.k0s()()()(),e.j41(48,"div",23)(49,"div",24)(50,"div",25)(51,"div",26),e.nrm(52,"i",27),e.k0s(),e.j41(53,"input",28),e.bIt("ngModelChange",function(d){return r.searchTerm=d})("input",function(){return r.filterProducts()}),e.k0s()(),e.j41(54,"div",29)(55,"span"),e.EFF(56),e.k0s()()()(),e.j41(57,"div",30)(58,"div",31)(59,"table",32)(60,"thead",33)(61,"tr")(62,"th",34),e.EFF(63,"Index"),e.k0s(),e.j41(64,"th",34),e.EFF(65,"Product Name"),e.k0s(),e.j41(66,"th",34),e.EFF(67,"Price"),e.k0s(),e.j41(68,"th",34),e.EFF(69,"Stock"),e.k0s(),e.j41(70,"th",34),e.EFF(71,"Category"),e.k0s(),e.j41(72,"th",34),e.EFF(73,"Colors"),e.k0s(),e.j41(74,"th",34),e.EFF(75,"Warranty"),e.k0s(),e.j41(76,"th",34),e.EFF(77,"Hot"),e.k0s(),e.j41(78,"th",34),e.EFF(79,"Actions"),e.k0s()()(),e.j41(80,"tbody",35),e.DNE(81,w,37,19,"tr",36),e.k0s()()(),e.DNE(82,I,8,0,"div",37),e.k0s(),e.j41(83,"app-admin-modal",38),e.bIt("close",function(){return r.closeModal()})("save",function(d){return r.handleSave(d)})("confirmDelete",function(d){return r.handleDelete(d)}),e.k0s()()),2&o&&(e.R7$(23),e.JRh(r.products.length),e.R7$(8),e.JRh(r.activeProductsCount),e.R7$(8),e.JRh(r.lowStockCount),e.R7$(8),e.JRh(r.outOfStockCount),e.R7$(6),e.Y8G("ngModel",r.searchTerm),e.R7$(3),e.Lme("Showing ",r.filteredProducts.length," of ",r.products.length," products"),e.R7$(25),e.Y8G("ngForOf",r.filteredProducts),e.R7$(1),e.Y8G("ngIf",0===r.filteredProducts.length),e.R7$(1),e.Y8G("isOpen",r.isModalOpen)("mode",r.modalMode)("entityType","product")("product",r.selectedProduct))},dependencies:[l.YU,l.Sq,l.bT,n.me,n.BC,n.vS,m.Wk,b]})}}return i})();var y=c(5423);function S(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Product name is required"),e.k0s())}function M(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Product name must be at least 3 characters"),e.k0s())}function T(i,a){if(1&i&&(e.j41(0,"div",57),e.DNE(1,S,2,0,"span",56),e.DNE(2,M,2,0,"span",56),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.required),e.R7$(1),e.Y8G("ngIf",null==t.name||null==t.name.errors?null:t.name.errors.minlength)}}function R(i,a){1&i&&(e.j41(0,"div",57),e.EFF(1," Colors are required "),e.k0s())}function V(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Price is required"),e.k0s())}function $(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Price must be greater than 0"),e.k0s())}function G(i,a){if(1&i&&(e.j41(0,"div",57),e.DNE(1,V,2,0,"span",56),e.DNE(2,$,2,0,"span",56),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",null==t.price||null==t.price.errors?null:t.price.errors.required),e.R7$(1),e.Y8G("ngIf",null==t.price||null==t.price.errors?null:t.price.errors.min)}}function N(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Stock quantity is required"),e.k0s())}function O(i,a){1&i&&(e.j41(0,"span"),e.EFF(1,"Stock must be 0 or greater"),e.k0s())}function D(i,a){if(1&i&&(e.j41(0,"div",57),e.DNE(1,N,2,0,"span",56),e.DNE(2,O,2,0,"span",56),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",null==t.stock||null==t.stock.errors?null:t.stock.errors.required),e.R7$(1),e.Y8G("ngIf",null==t.stock||null==t.stock.errors?null:t.stock.errors.min)}}function U(i,a){if(1&i&&(e.j41(0,"option",58),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.name," ")}}function Y(i,a){1&i&&(e.j41(0,"div",57),e.EFF(1," Category is required "),e.k0s())}function X(i,a){1&i&&(e.j41(0,"div",68)(1,"span",69),e.EFF(2,"Invalid URL"),e.k0s()())}function B(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",63)(1,"img",64),e.bIt("error",function(){const s=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.markImageAsInvalid(s))}),e.k0s(),e.j41(2,"div",65),e.EFF(3),e.k0s(),e.j41(4,"button",66),e.bIt("click",function(){const s=e.eBV(t).index,d=e.XpG(2);return e.Njj(d.removeImage(s))}),e.EFF(5," \xd7 "),e.k0s(),e.DNE(6,X,3,0,"div",67),e.k0s()}if(2&i){const t=a.$implicit,o=a.index,r=e.XpG(2);e.R7$(1),e.HbH(r.isImageUrlInvalid(o)?"opacity-50":""),e.Y8G("src",t,e.B4B),e.R7$(1),e.Y8G("title",r.getImageSourceType(t)),e.R7$(1),e.SpI(" ",r.getImageSourceType(t)," "),e.R7$(3),e.Y8G("ngIf",r.isImageUrlInvalid(o))}}function L(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"button",71),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.clearAllImages())}),e.EFF(2," Clear All Images "),e.k0s(),e.j41(3,"button",72),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.reorderImages())}),e.EFF(4," Reorder Randomly "),e.k0s()()}}function q(i,a){if(1&i&&(e.j41(0,"div",14)(1,"h3",59),e.EFF(2),e.k0s(),e.j41(3,"div",60),e.DNE(4,B,7,6,"div",61),e.k0s(),e.DNE(5,L,5,0,"div",62),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.SpI("Selected Images (",t.imagePreviews.length,")"),e.R7$(2),e.Y8G("ngForOf",t.imagePreviews),e.R7$(1),e.Y8G("ngIf",t.imagePreviews.length>0)}}function z(i,a){if(1&i&&(e.j41(0,"span"),e.nrm(1,"i",73),e.EFF(2),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.SpI(" ",t.isEditMode?"Updating...":"Creating..."," ")}}function J(i,a){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.SpI(" ",t.isEditMode?"Update Product":"Create Product"," ")}}let v=(()=>{class i{constructor(t,o,r,s,d){this.fb=t,this.route=o,this.router=r,this.productService=s,this.toast=d,this.isEditMode=!1,this.isSubmitting=!1,this.productId=null,this.imagePreviews=[],this.invalidImageUrls=[],this.categories=[],this.productForm=this.createProductForm()}ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.productId,this.loadCategories(),this.isEditMode&&this.productId&&this.loadProductData(this.productId),console.log("AdminProductFormComponent initialized - Mode:",this.isEditMode?"Edit":"Create")}createProductForm(){return this.fb.group({name:["",[n.k0.required,n.k0.minLength(3)]],description:[""],price:[0,[n.k0.required,n.k0.min(0)]],comparePrice:[0],stock:[0,[n.k0.required,n.k0.min(0)]],category:["",[n.k0.required]],status:["active"],topselling:["no"],colors:[[],[n.k0.required]],warranty:[""]})}loadCategories(){this.productService.getCategories().subscribe({next:t=>{this.categories=t},error:t=>{console.error("Error loading categories:",t),this.toast.error("Error loading categories")}})}loadProductData(t){this.productService.getProductById(t).subscribe({next:o=>{o&&(this.productForm.patchValue({name:o.name,description:o.description,price:o.price,stock:o.stock,category:o.category,status:o.isStock?"active":"inactive",topselling:o.topSelling?"yes":"no",colors:o.colors||[],warranty:o.warranty}),this.imagePreviews=o.images||[],this.validateAllImageUrls())},error:o=>{console.error("Error loading product:",o),this.toast.error("Error loading product!"),alert("Error loading product data")}})}onSubmit(){if(this.productForm.invalid)return void this.markFormGroupTouched();if(this.invalidImageUrls.length>0&&!confirm("Some images have invalid URLs. They will not be saved. Do you want to continue?"))return;this.isSubmitting=!0;const t=this.productForm.value,o=this.imagePreviews.filter((s,d)=>!this.isImageUrlInvalid(d)),r={name:t.name,price:Number(t.price),images:o,isStock:"active"===t.status,colors:t.colors.split(",").map(s=>s.trim()),topSelling:"yes"===t.topselling,stock:Number(t.stock),category:t.category,slug:this.generateSlug(t.name),warranty:t.warranty,description:t.description};this.isEditMode&&this.productId?this.productService.updateProduct(this.productId,{...r,id:this.productId}).subscribe({next:()=>{this.handleSuccess("Product updated successfully!"),this.toast.success("Product updated successfully!")},error:s=>{this.handleError(s,"updating")}}):this.productService.createProduct(r).subscribe({next:()=>{this.handleSuccess("Product created successfully!"),this.toast.success("Product updated successfully!")},error:s=>{this.handleError(s,"creating")}})}handleSuccess(t){this.isSubmitting=!1,this.router.navigate(["/admin/products/list"])}handleError(t,o){this.isSubmitting=!1,console.error(`Error ${o} product:`,t),alert(`Error ${o} product. Please try again.`)}onImageSelected(t){const o=t.target.files;if(o){for(let r of o){const s=new FileReader;s.onload=d=>{this.imagePreviews.push(d.target.result)},s.readAsDataURL(r)}t.target.value=""}}addImageByUrl(t){if(t&&""!==t.trim()){try{new URL(t)}catch{return void this.toast.error("Please enter a valid URL!")}this.imagePreviews.includes(t)?this.toast.info("This image URL has already been added!"):(this.imagePreviews.push(t.trim()),this.validateImageUrl(this.imagePreviews.length-1))}else this.toast.error("Please enter a valid URL!")}removeImage(t){this.imagePreviews.splice(t,1);const o=[];this.invalidImageUrls.forEach(r=>{r!==t&&o.push(r>t?r-1:r)}),this.invalidImageUrls=o}clearAllImages(){this.imagePreviews.length>0&&confirm("Are you sure you want to remove all images?")&&(this.imagePreviews=[],this.invalidImageUrls=[])}reorderImages(){this.imagePreviews=this.imagePreviews.map(t=>({value:t,sort:Math.random()})).sort((t,o)=>t.sort-o.sort).map(({value:t})=>t)}markImageAsInvalid(t){this.invalidImageUrls.includes(t)||this.invalidImageUrls.push(t)}isImageUrlInvalid(t){return this.invalidImageUrls.includes(t)}getImageSourceType(t){return t.startsWith("data:")?"Uploaded File":t.startsWith("blob:")?"Blob URL":"External URL"}validateImageUrl(t){const o=this.imagePreviews[t];if(o.startsWith("data:")||o.startsWith("blob:"))return;const r=new Image;r.onload=()=>{const s=this.invalidImageUrls.indexOf(t);s>-1&&this.invalidImageUrls.splice(s,1)},r.onerror=()=>{this.markImageAsInvalid(t)},r.src=o,setTimeout(()=>{r.complete||this.markImageAsInvalid(t)},5e3)}validateAllImageUrls(){this.imagePreviews.forEach((t,o)=>{this.validateImageUrl(o)})}markFormGroupTouched(){Object.keys(this.productForm.controls).forEach(t=>{this.productForm.get(t)?.markAsTouched()})}generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}get name(){return this.productForm.get("name")}get price(){return this.productForm.get("price")}get stock(){return this.productForm.get("stock")}get category(){return this.productForm.get("category")}get colors(){return this.productForm.get("colors")}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(n.ok),e.rXU(m.nX),e.rXU(m.Ix),e.rXU(p.b),e.rXU(y.f))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-admin-product-form"]],decls:121,vars:13,consts:[[1,"container","mx-auto","p-6"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-1"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"border-b","border-gray-200","pb-6"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","name","formControlName","name","placeholder","Enter product name",1,"w-full","px-3","py-2","text-black","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","colors",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","colors","formControlName","colors","placeholder","Enter colors (comma separated)",1,"w-full","px-3","py-2","border","border-gray-300","text-black","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"mt-4"],["for","description",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","description","formControlName","description","rows","4","placeholder","Enter product description",1,"w-full","px-3","py-2","text-black","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["for","price",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],[1,"absolute","left-3","top-2","text-gray-500"],["type","number","id","price","formControlName","price","step","0.01","min","0","placeholder","0.00",1,"w-full","pl-8","pr-3","py-2","text-black","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["for","warranty",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","id","warranty","formControlName","warranty","placeholder","e.g., 1 Y",1,"w-full","pl-8","pr-3","py-2","text-black","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["for","stock",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","number","id","stock","formControlName","stock","min","0","placeholder","0",1,"w-full","px-3","py-2","border","text-black","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["for","category",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","category","formControlName","category",1,"w-full","px-3","py-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-black","focus:border-transparent"],["value","",1,"text-black"],["class","text-black",3,"value",4,"ngFor","ngForOf"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","space-x-4"],[1,"inline-flex","items-center"],["type","radio","formControlName","status","value","active",1,"text-blue-600","focus:ring-blue-500"],[1,"ml-2","text-gray-700"],["type","radio","formControlName","status","value","inactive",1,"text-blue-600","focus:ring-blue-500"],["type","radio","formControlName","topselling","value","yes",1,"text-blue-600","focus:ring-blue-500"],["type","radio","formControlName","topselling","value","no",1,"text-blue-600","focus:ring-blue-500"],[1,"text-md","font-medium","text-gray-700","mb-3"],[1,"border-2","border-dashed","border-gray-300","rounded-lg","p-6","text-center"],[1,"fa-solid","fa-cloud-arrow-up","text-3xl","text-gray-400","mb-3"],[1,"text-gray-600","mb-2"],[1,"text-sm","text-gray-500","mb-4"],["type","file","multiple","","accept","image/*",1,"hidden",3,"change"],["fileInput",""],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg",3,"click"],[1,"text-xs","text-gray-500","mt-2"],[1,"flex","space-x-2"],["type","url","placeholder","Enter image URL (https://...)",1,"flex-1","px-3","py-2","border","border-gray-300","text-black","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"keyup.enter"],["urlInput",""],["type","button",1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded-lg",3,"click"],[1,"text-xs","text-gray-500","mt-1"],["class","mt-4",4,"ngIf"],[1,"flex","justify-end","space-x-4","pt-4"],["type","button","routerLink","/admin/products/list",1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:bg-blue-300","disabled:cursor-not-allowed","transition-colors",3,"disabled"],[4,"ngIf"],[1,"text-red-500","text-sm","mt-1"],[1,"text-black",3,"value"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-4"],["class","relative border rounded-lg overflow-hidden bg-gray-100",4,"ngFor","ngForOf"],["class","mt-4 flex space-x-2",4,"ngIf"],[1,"relative","border","rounded-lg","overflow-hidden","bg-gray-100"],["alt","Preview",1,"w-full","h-24","object-cover",3,"src","error"],[1,"p-2","text-xs","truncate",3,"title"],["type","button",1,"absolute","top-1","right-1","bg-red-500","text-white","rounded-full","w-5","h-5","flex","items-center","justify-center","text-xs","hover:bg-red-600","transition-colors",3,"click"],["class","absolute inset-0 bg-red-100 bg-opacity-50 flex items-center justify-center",4,"ngIf"],[1,"absolute","inset-0","bg-red-100","bg-opacity-50","flex","items-center","justify-center"],[1,"text-red-600","text-xs","font-medium"],[1,"mt-4","flex","space-x-2"],["type","button",1,"px-3","py-1","bg-red-500","text-white","text-sm","rounded","hover:bg-red-600","transition-colors",3,"click"],["type","button",1,"px-3","py-1","bg-gray-500","text-white","text-sm","rounded","hover:bg-gray-600","transition-colors",3,"click"],[1,"fa-solid","fa-spinner","fa-spin","mr-2"]],template:function(o,r){if(1&o){const s=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3),e.k0s(),e.j41(4,"p",3),e.EFF(5),e.k0s()(),e.j41(6,"div",4)(7,"form",5),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(8,"div",6)(9,"h2",7),e.EFF(10,"Basic Information"),e.k0s(),e.j41(11,"div",8)(12,"div")(13,"label",9),e.EFF(14," Product Name * "),e.k0s(),e.nrm(15,"input",10),e.DNE(16,T,3,2,"div",11),e.k0s(),e.j41(17,"div")(18,"label",12),e.EFF(19," Colors Available * "),e.k0s(),e.nrm(20,"input",13),e.DNE(21,R,2,0,"div",11),e.k0s()(),e.j41(22,"div",14)(23,"label",15),e.EFF(24," Description "),e.k0s(),e.nrm(25,"textarea",16),e.k0s()(),e.j41(26,"div",6)(27,"h2",7),e.EFF(28,"Pricing & Inventory"),e.k0s(),e.j41(29,"div",17)(30,"div")(31,"label",18),e.EFF(32," Price * "),e.k0s(),e.j41(33,"div",19)(34,"span",20),e.EFF(35,"$"),e.k0s(),e.nrm(36,"input",21),e.k0s(),e.DNE(37,G,3,2,"div",11),e.k0s(),e.j41(38,"div")(39,"label",22),e.EFF(40," Warranty "),e.k0s(),e.j41(41,"div",19)(42,"span",20),e.EFF(43,"Y"),e.k0s(),e.nrm(44,"input",23),e.k0s()(),e.j41(45,"div")(46,"label",24),e.EFF(47," Stock Quantity * "),e.k0s(),e.nrm(48,"input",25),e.DNE(49,D,3,2,"div",11),e.k0s()()(),e.j41(50,"div",6)(51,"h2",7),e.EFF(52,"Categories & Status"),e.k0s(),e.j41(53,"div",8)(54,"div")(55,"label",26),e.EFF(56," Category * "),e.k0s(),e.j41(57,"select",27)(58,"option",28),e.EFF(59,"Select Category"),e.k0s(),e.DNE(60,U,2,2,"option",29),e.k0s(),e.DNE(61,Y,2,0,"div",11),e.k0s(),e.j41(62,"div")(63,"label",30),e.EFF(64,"Status"),e.k0s(),e.j41(65,"div",31)(66,"label",32),e.nrm(67,"input",33),e.j41(68,"span",34),e.EFF(69,"Active"),e.k0s()(),e.j41(70,"label",32),e.nrm(71,"input",35),e.j41(72,"span",34),e.EFF(73,"Inactive"),e.k0s()()()(),e.j41(74,"div")(75,"label",30),e.EFF(76,"Top Selling"),e.k0s(),e.j41(77,"div",31)(78,"label",32),e.nrm(79,"input",36),e.j41(80,"span",34),e.EFF(81,"Yes"),e.k0s()(),e.j41(82,"label",32),e.nrm(83,"input",37),e.j41(84,"span",34),e.EFF(85,"No"),e.k0s()()()()()(),e.j41(86,"div",6)(87,"h2",7),e.EFF(88,"Product Images"),e.k0s(),e.j41(89,"div",1)(90,"h3",38),e.EFF(91,"Upload Images"),e.k0s(),e.j41(92,"div",39),e.nrm(93,"i",40),e.j41(94,"p",41),e.EFF(95,"Drag & drop your images here"),e.k0s(),e.j41(96,"p",42),e.EFF(97,"or"),e.k0s(),e.j41(98,"input",43,44),e.bIt("change",function(u){return r.onImageSelected(u)}),e.k0s(),e.j41(100,"button",45),e.bIt("click",function(){e.eBV(s);const u=e.sdS(99);return e.Njj(u.click())}),e.EFF(101," Browse Files "),e.k0s(),e.j41(102,"p",46),e.EFF(103,"PNG, JPG, GIF up to 10MB"),e.k0s()()(),e.j41(104,"div",1)(105,"h3",38),e.EFF(106,"Add Image by URL"),e.k0s(),e.j41(107,"div",47)(108,"input",48,49),e.bIt("keyup.enter",function(){e.eBV(s);const u=e.sdS(109);return r.addImageByUrl(u.value),e.Njj(u.value="")}),e.k0s(),e.j41(110,"button",50),e.bIt("click",function(){e.eBV(s);const u=e.sdS(109);return r.addImageByUrl(u.value),e.Njj(u.value="")}),e.EFF(111," Add URL "),e.k0s()(),e.j41(112,"p",51),e.EFF(113,"Enter a valid image URL and click Add URL"),e.k0s()(),e.DNE(114,q,6,3,"div",52),e.k0s(),e.j41(115,"div",53)(116,"button",54),e.EFF(117," Cancel "),e.k0s(),e.j41(118,"button",55),e.DNE(119,z,3,1,"span",56),e.DNE(120,J,2,1,"span",56),e.k0s()()()()()}2&o&&(e.R7$(3),e.SpI(" ",r.isEditMode?"Edit Product":"Add New Product"," "),e.R7$(2),e.SpI(" ",r.isEditMode?"Update existing product information":"Create a new product for your store"," "),e.R7$(2),e.Y8G("formGroup",r.productForm),e.R7$(9),e.Y8G("ngIf",(null==r.name?null:r.name.invalid)&&(null==r.name?null:r.name.touched)),e.R7$(5),e.Y8G("ngIf",(null==r.colors?null:r.colors.invalid)&&(null==r.colors?null:r.colors.touched)),e.R7$(16),e.Y8G("ngIf",(null==r.price?null:r.price.invalid)&&(null==r.price?null:r.price.touched)),e.R7$(12),e.Y8G("ngIf",(null==r.stock?null:r.stock.invalid)&&(null==r.stock?null:r.stock.touched)),e.R7$(11),e.Y8G("ngForOf",r.categories),e.R7$(1),e.Y8G("ngIf",(null==r.category?null:r.category.invalid)&&(null==r.category?null:r.category.touched)),e.R7$(53),e.Y8G("ngIf",r.imagePreviews.length>0),e.R7$(4),e.Y8G("disabled",r.productForm.invalid||r.isSubmitting),e.R7$(1),e.Y8G("ngIf",r.isSubmitting),e.R7$(1),e.Y8G("ngIf",!r.isSubmitting))},dependencies:[l.Sq,l.bT,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.Fm,n.BC,n.cb,n.VZ,m.Wk,n.j4,n.JD],styles:['.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.required[_ngcontent-%COMP%]:after{content:" *";color:#ef4444}.image-preview-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem}.image-preview[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;border:2px solid #e5e7eb;border-radius:.5rem;overflow:hidden}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.remove-image[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:#ef4444;color:#fff;border:none;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.75rem;cursor:pointer}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ef4444!important}.validation-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.25rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}']})}}return i})();function W(i,a){1&i&&(e.j41(0,"div",33),e.EFF(1," ... "),e.k0s())}function H(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",33)(1,"button",34),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,s=e.XpG();return e.Njj(s.openEditCategoryModal(r))}),e.nrm(2,"i",35),e.j41(3,"span",36),e.EFF(4,"Edit"),e.k0s()(),e.j41(5,"button",37),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,s=e.XpG();return e.Njj(s.openDeleteCategoryModal(r))}),e.nrm(6,"i",38),e.j41(7,"span",36),e.EFF(8,"Delete"),e.k0s()()()}}const Q=function(i){return{"background-color":i}};function Z(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",23),e.nrm(2,"img",24),e.j41(3,"span",25),e.EFF(4),e.k0s()(),e.j41(5,"div",26)(6,"div")(7,"h3",27),e.EFF(8),e.k0s(),e.j41(9,"p",28),e.EFF(10),e.k0s()(),e.j41(11,"div",29)(12,"button",30),e.bIt("click",function(){const s=e.eBV(t).$implicit,d=e.XpG();return e.Njj(d.menuOption(s.id))}),e.nrm(13,"i",31),e.k0s(),e.DNE(14,W,2,0,"div",32),e.DNE(15,H,9,0,"div",32),e.k0s()()()}if(2&i){const t=a.$implicit,o=e.XpG();e.R7$(2),e.Y8G("src",t.icon,e.B4B)("alt",t.name),e.R7$(1),e.Y8G("ngStyle",e.eq3(8,Q,t.color)),e.R7$(1),e.SpI(" ",t.status?"Active":"Inactive"," "),e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.id),e.R7$(4),e.Y8G("ngIf",o.openMenuId===t.id),e.R7$(1),e.Y8G("ngIf",o.openMenuId==t.id)}}function K(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",39),e.nrm(1,"i",40),e.j41(2,"h3",41),e.EFF(3,"No categories yet"),e.k0s(),e.j41(4,"p",42),e.EFF(5,"Get started by creating your first product category."),e.k0s(),e.j41(6,"button",43),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.openAddCategoryModal())}),e.EFF(7," Create Category "),e.k0s()()}}const ee=[{path:"",children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:A},{path:"new",component:v},{path:"edit/:id",component:v},{path:"categories",component:(()=>{class i{constructor(t,o,r,s,d){this.productService=t,this.categoriesService=o,this.http=r,this.toast=s,this.fb=d,this.categories=[],this.openMenuId=null,this.showCategoryModal=!1,this.totalCategories=0,this.activeCategories=0,this.nonactiveCategories=0,this.isModalOpen=!1,this.modalMode="add",this.selectedCategory=null}ngOnInit(){this.loadCategories()}loadCategories(){this.categoriesService.getCategories().subscribe({next:t=>{this.categories=t,this.totalCategories=this.categories.length,this.activeCategories=this.categories.filter(o=>1==o.status).length,this.nonactiveCategories=this.categories.filter(o=>!0!==o.status).length},error:t=>{console.error("Error loading categories:",t),this.toast.error("Error loading categories")}})}menuOption(t){this.openMenuId=this.openMenuId===t?null:t}openAddCategoryModal(){this.modalMode="add",this.selectedCategory=null,this.isModalOpen=!0}openEditCategoryModal(t){this.modalMode="edit",this.selectedCategory={...t},this.isModalOpen=!0,this.openMenuId=null}openDeleteCategoryModal(t){this.modalMode="delete",this.selectedCategory={...t},this.isModalOpen=!0,this.openMenuId=null}closeModal(){this.isModalOpen=!1,this.selectedCategory=null,this.modalMode="add"}handleSave(t){if(console.log("Saving category:",t),"add"===this.modalMode){const o={...t,id:this.generateCategoryId(t.name)};this.categoriesService.addCategory(o).subscribe({next:()=>{this.toast.success("Category added successfully"),this.closeModal(),this.loadCategories()},error:r=>{console.error("Error adding category:",r),this.toast.error("Error adding category")}})}else if("edit"===this.modalMode&&this.selectedCategory?.id){const o={...t,id:this.selectedCategory.id};this.categoriesService.updateCategory(this.selectedCategory.id,o).subscribe({next:()=>{this.toast.success("Category updated successfully"),this.closeModal(),this.loadCategories()},error:r=>{console.error("Error updating category:",r),this.toast.error("Error updating category")}})}}handleDelete(t){this.categoriesService.deleteCategory(t).subscribe({next:()=>{this.toast.success("Category deleted successfully"),this.closeModal(),this.loadCategories()},error:o=>{console.error("Error deleting category:",o),this.toast.error("Error deleting category")}})}generateCategoryId(t){return t.toLowerCase().replace(/\s+/g,"-")}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(p.b),e.rXU(f),e.rXU(g.Qq),e.rXU(y.f),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-admin-product-categories"]],decls:40,vars:9,consts:[[1,"container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-gray-600","mt-1"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","space-x-2",3,"click"],[1,"fa-solid","fa-plus"],[1,"bg-gray-50","rounded-lg","p-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","p-4","text-center","border"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-lg","font-semibold","text-gray-800","mt-4","mb-4"],[1,"p-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-6"],["class","group bg-white rounded-2xl shadow-sm border border-gray-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","justify-center","border-2","border-dashed","border-gray-300","rounded-2xl","p-6","hover:border-blue-500","hover:bg-blue-50","transition","cursor-pointer",3,"click"],[1,"w-12","h-12","flex","items-center","justify-center","rounded-full","bg-blue-100","text-blue-600","mb-2"],[1,"fa-solid","fa-plus","text-lg"],[1,"font-medium","text-blue-600"],["class","text-center py-12",4,"ngIf"],[3,"isOpen","mode","entityType","category","close","save","confirmDelete"],[1,"group","bg-white","rounded-2xl","shadow-sm","border","border-gray-100","hover:shadow-xl","hover:-translate-y-1","transition-all","duration-300"],[1,"relative","w-full","h-40","overflow-hidden","rounded-t-2xl"],[1,"w-full","h-full","object-cover","group-hover:scale-110","transition-transform","duration-500",3,"src","alt"],[1,"absolute","top-3","left-3","px-2","py-1","text-xs","font-semibold","text-white","rounded-md",3,"ngStyle"],[1,"p-4","flex","items-start","justify-between"],[1,"font-semibold","text-gray-800"],[1,"text-sm","text-gray-500"],[1,"relative"],[1,"p-1.5","rounded-full","hover:bg-gray-100","text-gray-500","transition",3,"click"],[1,"fa-solid","fa-ellipsis-vertical"],["class","absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-100 z-20 animate-fadeIn",4,"ngIf"],[1,"absolute","right-0","mt-2","w-40","bg-white","rounded-lg","shadow-lg","border","border-gray-100","z-20","animate-fadeIn"],[1,"flex","items-center","w-full","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100",3,"click"],[1,"fa-solid","fa-pen","w-4"],[1,"ml-2"],[1,"flex","items-center","w-full","px-4","py-2","text-sm","text-red-600","hover:bg-gray-100",3,"click"],[1,"fa-solid","fa-trash","w-4"],[1,"text-center","py-12"],[1,"fa-solid","fa-folder-open","text-4xl","text-gray-300","mb-4"],[1,"text-lg","font-medium","text-gray-700","mb-2"],[1,"text-gray-500","mb-6"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2","rounded-lg",3,"click"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Product Categories"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Manage your product categories and organization"),e.k0s()(),e.j41(7,"button",4),e.bIt("click",function(){return r.openAddCategoryModal()}),e.nrm(8,"i",5),e.j41(9,"span"),e.EFF(10,"Add Category"),e.k0s()()(),e.j41(11,"div",6)(12,"div",7)(13,"div",8)(14,"div",9),e.EFF(15),e.k0s(),e.j41(16,"div",10),e.EFF(17,"Total"),e.k0s()(),e.j41(18,"div",8)(19,"div",11),e.EFF(20),e.k0s(),e.j41(21,"div",10),e.EFF(22,"Active"),e.k0s()(),e.j41(23,"div",8)(24,"div",11),e.EFF(25),e.k0s(),e.j41(26,"div",10),e.EFF(27,"Non-Active"),e.k0s()()()(),e.j41(28,"h2",12),e.EFF(29,"Category List"),e.k0s(),e.j41(30,"div",13)(31,"div",14),e.DNE(32,Z,16,10,"div",15),e.j41(33,"div",16),e.bIt("click",function(){return r.openAddCategoryModal()}),e.j41(34,"div",17),e.nrm(35,"i",18),e.k0s(),e.j41(36,"p",19),e.EFF(37,"Add Category"),e.k0s()()()(),e.DNE(38,K,8,0,"div",20),e.k0s(),e.j41(39,"app-admin-modal",21),e.bIt("close",function(){return r.closeModal()})("save",function(d){return r.handleSave(d)})("confirmDelete",function(d){return r.handleDelete(d)}),e.k0s()),2&o&&(e.R7$(15),e.SpI("",r.totalCategories," "),e.R7$(5),e.SpI(" ",r.activeCategories,""),e.R7$(5),e.SpI(" ",r.nonactiveCategories,""),e.R7$(7),e.Y8G("ngForOf",r.categories),e.R7$(6),e.Y8G("ngIf",0===r.categories.length),e.R7$(1),e.Y8G("isOpen",r.isModalOpen)("mode",r.modalMode)("entityType","category")("category",r.selectedCategory))},dependencies:[l.Sq,l.bT,l.B3,b],styles:[".category-card[_ngcontent-%COMP%]{transition:all .3s ease}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.status-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;padding:.25rem .75rem;border-radius:9999px}.menu-button[_ngcontent-%COMP%]{transition:all .2s ease}.menu-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.dropdown-menu[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dropdownFade .2s ease-out}@keyframes _ngcontent-%COMP%_dropdownFade{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.modal-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFade .3s ease-out}.modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlide .3s ease-out}@keyframes _ngcontent-%COMP%_modalFade{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalSlide{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}input[type=color][_ngcontent-%COMP%]{-webkit-appearance:none;border:none;border-radius:.5rem;cursor:pointer}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0;border-radius:.5rem}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:.5rem}.empty-state[_ngcontent-%COMP%]{color:#9ca3af}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}.stat-card[_ngcontent-%COMP%]{transition:transform .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}"]})}}return i})()}]}];let te=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(ee),m.iI]})}}return i})(),re=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[l.MD,n.YN,m.iI,n.X1,te]})}}return i})()}}]);
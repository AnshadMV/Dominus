<!-- Loading State -->
<div *ngIf="isLoading" class="min-h-screen flex items-center justify-center">
  <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-black"></div>
</div>

<!-- Product Detail -->
<div *ngIf="!isLoading && product" class="min-h-screen bg-white py-8">
  <div class="container mx-auto px-4">
    <div class="flex items-center gap-4 mb-6">
      <button (click)="goBack()" class="flex items-center gap-2 text-gray-600 hover:text-black transition-colors">
        <i class="fa-solid fa-arrow-left"></i>
        <span>Back to Products</span>
      </button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Product Images -->
      <div class="space-y-4">
        <!-- Main Image -->
        <div class="bg-gray-50 rounded-xl overflow-hidden h-96 flex items-center justify-center">
          <img [src]="product.images[selectedImageIndex]" [alt]="product.name" 
               class="h-full w-full object-contain transition-transform duration-300">
        </div>
        
        <!-- Thumbnail Images -->
        <div *ngIf="product.images.length > 1" class="flex gap-2 overflow-x-auto hide-scrollbar">
          <button *ngFor="let image of product.images; let i = index" 
                  (click)="selectImage(i)"
                  [class]="'flex-shrink-0 w-20 h-20 bg-gray-50 rounded-lg overflow-hidden border-2 ' + 
                          (selectedImageIndex === i ? 'border-black' : 'border-transparent')">
            <img [src]="image" [alt]="product.name + ' thumbnail ' + (i + 1)" 
                 class="w-full h-full object-contain">
          </button>
        </div>
      </div>

      <!-- Product Info -->
      <div class="space-y-6">
        <!-- Category Badge -->
        <div class="text-xs bg-black text-white px-3 py-1 rounded-full inline-block">
          {{ product.category | titlecase }}
        </div>

        <!-- Product Name -->
        <h1 class="text-3xl font-bold text-black">{{ product.name }}</h1>

        <!-- Price -->
        <p class="text-2xl font-bold text-black">{{ product.price | currency:'INR' }}</p>

        <!-- Stock Status -->
        <div class="flex items-center gap-2">
          <span class="text-sm font-medium" 
                [class.text-green-600]="product.stock > 0" 
                [class.text-red-600]="product.stock === 0">
            {{ product.stock > 0 ? 'In Stock' : 'Out of Stock' }}
          </span>
          <span class="text-sm text-gray-600">â€¢ {{ product.stock }} available</span>
        </div>

        <!-- Top Selling Badge -->
        <div *ngIf="product.topSelling" class="inline-flex items-center gap-2 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">
          <i class="fa-solid fa-fire"></i>
          <span>Top Selling Product</span>
        </div>

        <!-- Colors -->
        <div *ngIf="product.colors && product.colors.length > 0" class="space-y-2">
          <h3 class="font-semibold text-black">Colors</h3>
          <div class="flex gap-2">
            <div *ngFor="let color of product.colors" 
                 class="w-8 h-8 rounded-full border border-gray-300"
                 [style.background-color]="color.toLowerCase()"
                 [title]="color">
            </div>
          </div>
        </div>

        <!-- Description -->
        <div class="space-y-2">
          <h3 class="font-semibold text-black">Description</h3>
          <p class="text-gray-700 leading-relaxed">{{ product.description }}</p>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4 pt-4">
          <button (click)="addToCart(product)" 
                  [disabled]="product.stock === 0"
                  [class]="'flex-1 py-3 px-6 rounded-full font-semibold transition-all duration-200 ' +
                          (product.stock === 0 ? 
                           'bg-gray-300 text-gray-500 cursor-not-allowed' : 
                           'bg-black text-white hover:bg-gray-800')">
            <i class="fa-solid fa-cart-plus mr-2"></i>
            {{ product.stock === 0 ? 'Out of Stock' : 'Add to Cart' }}
          </button>
          
          <button (click)="addTowishlist(product)"
                  class="fill-black p-3 border border-gray-300 rounded-full hover:bg-gray-50">
            <i class="fa-regular fa-heart text-yellow-400 "></i>
          </button>
        </div>

        
      </div>
    </div>
  </div>
</div>

<!-- Product Not Found -->
<div *ngIf="!isLoading && !product" class="min-h-screen flex items-center justify-center">
  <div class="text-center">
    <div class="w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center">
      <i class="fa-solid fa-exclamation text-xl text-gray-400"></i>
    </div>
    <h3 class="text-lg font-semibold text-gray-700 mb-2">Product Not Found</h3>
    <p class="text-gray-500 text-sm mb-4">The product you're looking for doesn't exist.</p>
    <button (click)="goBack()" 
            class="bg-black text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-gray-800 transition-colors">
      Back to Products
    </button>
  </div>
</div>